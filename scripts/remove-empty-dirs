#!/bin/sh

if which gfind >/dev/null 2>&1; then
    alias find=gfind
fi

if [ $# -eq 0 ]; then
    set -- .
fi

rfind() {
    find "$@" -print
    find "$@" -delete
}

for dir; do
    dir="$(abspath "$dir")"
    find "$dir"/ -type d -name @eaDir -print0 | xargs -0 rm -rfv
    rfind "$dir"/ -type f -name .DS_Store
    rfind "$dir"/ -type f -name 'Icon'
    rfind "$dir"/ -type f -empty
    rfind "$dir"/ -type d -empty
done
