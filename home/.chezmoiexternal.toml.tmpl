{{ $clone_args := dig "external" "clone" "args" (list) . -}}
{{ $pull_args := dig "external" "pull" "args" (list) . -}}
{{- $binpath := ".local/bin" -}}
{{- if eq .chezmoi.os "windows" -}}
{{-   $binpath = "AppData/Local/Programs/bin" -}}
{{- end -}}
{{- $externaldata := dict
    "clone_args" $clone_args
    "pull_args" $pull_args
    "binpath" $binpath -}}
{{- $data := merge $externaldata . -}}

{{- includeTemplate "external/zsh.toml.tmpl" $data -}}
{{- includeTemplate "external/vim.toml.tmpl" $data -}}
{{- includeTemplate "external/cli-apps.toml.tmpl" $data -}}
{{- includeTemplate "external/scripts.toml.tmpl" $data -}}
{{- includeTemplate "external/fonts.toml.tmpl" $data -}}

{{ if eq .chezmoi.os "windows" }}
["AppData/Roaming/bat/syntaxes/BitBake.sublime-syntax"]
{{ else }}
[".config/bat/syntaxes/BitBake.sublime-syntax"]
{{ end }}
type = "archive-file"
url = "https://github.com/casparfriedrich/bitbake-syntax/archive/master.tar.gz"
path = "BitBake.sublime-syntax"
exact = true
stripComponents = 1
refreshPeriod = "168h"

[".config/zed/themes/dracula.json"]
type = "archive-file"
url = "https://github.com/dracula/zed/archive/master.tar.gz"
path = "themes/dracula.json"
exact = true
stripComponents = 1
refreshPeriod = "168h"

{{ if eq .chezmoi.os "darwin" -}}
["Library/Application Support/BBEdit/Color Schemes/Dracula.bbColorScheme"]
type = "archive-file"
url = "https://github.com/dracula/bbedit/archive/master.tar.gz"
path = "Dracula.bbColorScheme"
exact = true
stripComponents = 1
refreshPeriod = "168h"
{{- end }}
