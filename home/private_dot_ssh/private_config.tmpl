Protocol 2
SendEnv LANG LC_*
HashKnownHosts yes
ServerAliveInterval 60
Compression yes
ForwardX11 no
NoHostAuthenticationForLocalhost yes
AddKeysToAgent yes
{{- if ne .chezmoi.os "windows" }}
ControlMaster auto
ControlPersist yes
ControlPath ~/.ssh/socket.%r@%h:%p
{{- end }}
{{- if .personal }}
IdentityFile ~/.ssh/keys/frey
{{- else if .work }}
IdentityFile ~/.ssh/keys/work
{{- end }}

{{ if eq .chezmoi.os "darwin" }}
{{-   if glob ".config/colima/ssh_config" }}
Include ~/.config/colima/ssh_config
{{-   end }}
{{-   $lima_configs := glob ".lima/*/ssh.config" }}
{{-   range $lima_config := $lima_configs }}
Include ~/{{ $lima_config }}
{{-   end }}
{{- end }}
Include ~/.ssh/config.d/*
