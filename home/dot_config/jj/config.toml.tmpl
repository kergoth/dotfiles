{{- $signingKey := .git.signing_key }}
[user]
name = "{{ .name }}"
email = "{{ .email }}"

[diff]
tool = "delta"

[ui]
default-command = "l"
diff-formatter = ":git"
pager = "delta"

{{ if $signingKey -}}
[signing]
backend = "gpg"
behavior = "own"
key = {{ $signingKey | quote }}
{{- end }}

[aliases]
dlog = ["log", "-r"]
l = ["log", "-r", "(trunk()..@):: | (trunk()..@)-"]
fresh = ["new", "trunk()"]
tug = ["bookmark", "move", "--from", "heads(::@- & bookmarks())", "--to", "@-"]
fetch   = ['git', 'fetch', '--all-remotes']
evolve = ['rebase', '--skip-emptied', '-d', 'trunk()']
purr = ["util", "exec", "--", "bash", "-c", "jj fetch && jj evolve"]
gpush = ["util", "exec", "--", "bash", "-c", "jj tug && jj git push"]
sync = ["util", "exec", "--", "bash", "-c", "jj fetch && jj evolve && jj tug && jj git push"]
# Shorthand
d = ["diff"]
ci = ["commit"]
cm = ["commit", "-m"]
