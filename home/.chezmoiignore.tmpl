# Global junk
**/*~
**/.tmp*
**/.DS_Store
**/._*

# Explicitly not maintained via chezmoi
.profile
.bashrc
.bash_profile
.bash_logout

# Common home directory data and documents (not managed by chezmoi)
Desktop
Documents
Downloads
MacBox
Movies
Music
Pictures
Projects
Public
Repos/*
Sandbox
Site Mirrors
Sync
Templates
Virtual Machines
Workspace

# ChezMoi internals / repo-local state
.chezmoihooks
.chezmoihooks/**
.config/chezmoi
.chezmoiscripts/**

# Track only OS / variant subsets of scripts
!.chezmoiscripts/{{.chezmoi.os}}/**
!.chezmoiscripts/{{.osid}}/**

{{- if ne .chezmoi.os "windows" }}
!.chezmoiscripts/posix/**
{{- end }}

# Vim data files migration after path changes
{{- $vimPath := joinPath .chezmoi.homeDir ".config/vim" -}}
{{- if or (not (glob $vimPath)) (ne ($vimPath | lstat).type "symlink") }}
.chezmoiscripts/posix/prepare_vim
{{- end }}

# Shell / tool history and dev tool state
.bash_history
.lesshst
_lesshst
.code-terminal
.vscode
.vscode-server
.devpod
.devcontainer
.config/vscode-dev-containers
.envrc

# Cache handling (single source of truth)
{{- if eq .chezmoi.os "darwin" }}
Library/Caches/*
!Library/Caches/zsh
Library/Caches/zsh/*
!Library/Caches/zsh/functions
Library/Caches/zsh/functions/*
{{- else }}
.cache/*
!.cache/zsh
.cache/zsh/*
!.cache/zsh/functions
.cache/zsh/functions/*
{{- end }}

# Local-only state / package managers / misc
.brew
.config/gh/hosts.yml
.config/environment.d/10-home-manager.conf
.local/lib
.local/pipx
.local/share/*
!.local/share/user-places.xbel
!.local/share/kxmlgui5
!.local/share/zsh
.local/share/zsh/*
!.local/share/zsh/completions
.local/state/*
!.local/state/zsh
.local/state/zsh/*
.nix-channels
.nix-defexpr
.nix-profile
.oh-my-zsh
.Trash
.config/nix/registry.json
.terminfo
**/.zcompdump
**/*.iln*
**/*.zwc

# OS-specific ignores
{{- if ne .chezmoi.os "windows" }}
AppData
.config/scoop
.gnupg/gpg-agent.conf
.gnupg/*~
.gnupg/S.*
.gnupg/openpgp-revocs.d
{{- else }}
.gnupg/*
AppData/Roaming/gnupg/*~
AppData/Roaming/gnupg/S.*
AppData/Roaming/gnupg/openpgp-revocs.d
!Documents
Documents/*
!Documents/PowerShell
{{- end }}

{{- if ne .chezmoi.os "linux" }}
{{/* flatpak files */}}
.var
{{- end }}

{{- if ne .chezmoi.os "darwin" }}
.config/zsh/.zshrc.d/lima.zsh
.config/zsh/functions/lima
.lima
Library/
Applications/
Applications (Parallels)/
Obsidian Vault
My Kindle Content
# This wrapper is for macOS to use the zed-preview binary
.local/bin/zed
{{- end }}

# Host or Distro Specific ignores

# WSL-specific exclusions
{{- if not .wsl2 }}
.local/bin/wsl-open
.config/zsh/.zshrc.d/wsl.zsh
{{- end }}

{{- if not .steamdeck }}
# Files excluded on non-Steam-Deck Devices (Deck-only files)
.local/bin/deck*
.local/bin/ludusavi*
.config/systemd/user/deck-backup.service
.config/systemd/user/deck-backup.timer
.config/systemd/user/check-backup.service
.var/app
.config/Cemu
.config/PCSX2
.config/steam-rom-manager
ES-DE
SD
{{- else }}
# Files excluded on a Steam Deck
!.var/app
{{-   if not .emudeck }}
.config/Cemu
.config/PCSX2
.config/steam-rom-manager
.var/app/io.github.shiiion.primehack
.var/app/org.citra_emu.citra
.var/app/org.DolphinEmu.dolphin-emu
.var/app/org.libretro.RetroArch
.var/app/org.ppsspp.PPSSPP
ES-DE
{{-   end }}
{{-   if not .retrodeck }}
.var/app/net.retrodeck.retrodeck
.local/bin/retrodeck
{{-   end }}

.librewolf
.local/share/fonts/*
.config/powershell
.config/tmux
.config/starship-right.toml
.config/starship.toml
.config/gmailctl

.local/bin/linux-bundle-clone
.local/bin/repo
.local/bin/tmux-resize-adaptable

.var/app/net.retrodeck.retrodeck/config/retroarch/content_history.lpl
.var/app/net.retrodeck.retrodeck/config/retroarch/content_image_history.lpl
.var/app/net.retrodeck.retrodeck/config/retroarch/content_music_history.lpl
.var/app/net.retrodeck.retrodeck/config/PCSX2/inis/playtime.dat

.var/app/net.retrodeck.retrodeck/config/steam-rom-manager/*
!.var/app/net.retrodeck.retrodeck/config/steam-rom-manager/userData
.var/app/net.retrodeck.retrodeck/config/steam-rom-manager/userData/*
!.var/app/net.retrodeck.retrodeck/config/steam-rom-manager/userData/user*

# These are inputs into onepassword template files, don't apply them directly
.var/app/net.retrodeck.retrodeck/config/ES-DE/settings/es_settings.src.xml
.var/app/net.retrodeck.retrodeck/config/retroarch/retroarch.src.cfg

# Enabling backups is a manual step
.config/deck-backup/config.d/enable
{{- end }}

# Credentials / secrets (materialized plaintext outputs and machine-local sensitive state)
.ssh/agent.sock
.ssh/socket.*
.ssh/known_hosts
.ssh/known_hosts.old
.ssh/keys/*
.config/chezmoi/age.key

{{- if not .ephemeral }}
{{-   if .personal }}
.ssh/config.d/work
{{-     if not .steamdeck }}
!.ssh/keys/frey*
{{-     else }}
!.ssh/keys/frey.pub
{{-     end }}
{{-   end }}
{{-   if .work }}
.ssh/config.d/personal
!.ssh/keys/work*
{{-   end }}
{{- end }}

{{-   if .work }}
# Personal secrets
.config/rclone/rclone.conf
{{-   else }}
# Work secrets
.config/.jira/.config.yml
{{-   end }}

{{- if not .secrets }}
{{/* secrets encrypted with age */}}
.config/rclone/rclone.conf
.config/.jira/.config.yml
.ssh/config.d/personal
.ssh/config.d/work
.ssh/keys/frey
.ssh/keys/frey.pub
.ssh/keys/work
.ssh/keys/work.pub
.config/chezmoi_github_token

{{/* common secrets */}}
.gnupg
AppData/Roaming/gnupg
{{- end }}

# Dotfiles/setup repository clones
.dotfiles
.setup
