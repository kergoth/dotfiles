var Parsimmon=function(t){var r=function(t,r,n){return function e(u,a){if(a===n){a=u;u=Object}function i(){var t=this instanceof i?this:new s;t.init.apply(t,arguments);return t}function s(){}i.Bare=s;var c=s[t]=u[t];var f=s[t]=i[t]=i.p=new s;var o;f.constructor=i;i.extend=function(t){return e(i,t)};return(i.open=function(t){if(typeof t==="function"){t=t.call(i,f,c,i,u)}if(typeof t==="object"){for(o in t){if(r.call(t,o)){f[o]=t[o]}}}if(!("init"in f))f.init=u;return i})(a)}}("prototype",{}.hasOwnProperty);var n={};n.Parser=r(function(r,e,u){"use strict";function a(t,r){return{status:true,index:t,value:r,furthest:-1,expected:""}}function i(t,r){return{status:false,index:-1,value:null,furthest:t,expected:r}}function s(t,r){if(!r)return t;if(t.furthest>=r.furthest)return t;return{status:t.status,index:t.index,value:t.value,furthest:r.furthest,expected:r.expected}}function c(t){if(!(t instanceof u))throw new Error("not a parser: "+t)}var f=n.formatError=function(t,r){var n=r.expected;var e=r.index;if(e===t.length){return"expected "+n+", got the end of the string"}var u=e>0?"'...":"'";var a=t.length-e>12?"...'":"'";return"expected "+n+" at character "+e+", got "+u+t.slice(e,e+12)+a};r.init=function(t){this._=t};r.parse=function(t){var r=this.skip(A)._(t,0);return r.status?{status:true,value:r.value}:{status:false,index:r.furthest,expected:r.expected}};var o=n.seq=function(){var t=[].slice.call(arguments);var r=t.length;return u(function(n,e){var u;var i=new Array(r);for(var c=0;c<r;c+=1){u=s(t[c]._(n,e),u);if(!u.status)return u;i[c]=u.value;e=u.index}return s(a(e,i),u)})};var v=n.custom=function(t){return u(t(a,i))};var l=n.alt=function(){var t=[].slice.call(arguments);var r=t.length;if(r===0)return g("zero alternates");return u(function(r,n){var e;for(var u=0;u<t.length;u+=1){e=s(t[u]._(r,n),e);if(e.status)return e}return e})};r.or=function(t){return l(this,t)};r.then=function(t){if(typeof t==="function"){throw new Error("chaining features of .then are no longer supported")}c(t);return o(this,t).map(function(t){return t[1]})};r.many=function(){var t=this;return u(function(r,n){var e=[];var u;var i;for(;;){u=s(t._(r,n),u);if(u.status){n=u.index;e.push(u.value)}else{return s(a(n,e),u)}}})};r.times=function(t,r){if(arguments.length<2)r=t;var n=this;return u(function(e,u){var i=[];var c=u;var f;var o;for(var v=0;v<t;v+=1){f=n._(e,u);o=s(f,o);if(f.status){u=f.index;i.push(f.value)}else{return o}}for(;v<r;v+=1){f=n._(e,u);o=s(f,o);if(f.status){u=f.index;i.push(f.value)}else{break}}return s(a(u,i),o)})};r.result=function(t){return this.then(d(t))};r.atMost=function(t){return this.times(0,t)};r.atLeast=function(t){var r=this;return o(this.times(t),this.many()).map(function(t){return t[0].concat(t[1])})};r.map=function(t){var r=this;return u(function(n,e){var u=r._(n,e);if(!u.status)return u;return s(a(u.index,t(u.value)),u)})};r.skip=function(t){return o(this,t).map(function(t){return t[0]})};r.mark=function(){return o(j,this,j).map(function(t){return{start:t[0],value:t[1],end:t[2]}})};r.desc=function(t){return this.or(g(t))};var h=n.string=function(t){var r=t.length;var n="'"+t+"'";return u(function(e,u){var s=e.slice(u,u+r);if(s===t){return a(u+r,s)}else{return i(u,n)}})};var p=n.regex=function(t){var r=RegExp("^(?:"+t.source+")",(""+t).slice((""+t).lastIndexOf("/")+1));return u(function(n,e){var u=r.exec(n.slice(e));if(u){var s=u[0];return a(e+s.length,s)}else{return i(e,t)}})};var d=n.succeed=function(t){return u(function(r,n){return a(n,t)})};var g=n.fail=function(t){return u(function(r,n){return i(n,t)})};var x=n.letter=p(/[a-z]/i).desc("a letter");var m=n.letters=p(/[a-z]*/i);var y=n.digit=p(/[0-9]/).desc("a digit");var _=n.digits=p(/[0-9]*/);var w=n.whitespace=p(/\s+/).desc("whitespace");var k=n.optWhitespace=p(/\s*/);var E=n.any=u(function(t,r){if(r>=t.length)return i(r,"any character");return a(r+1,t.charAt(r))});var z=n.all=u(function(t,r){return a(t.length,t.slice(r))});var A=n.eof=u(function(t,r){if(r<t.length)return i(r,"EOF");return a(r,null)});var O=n.test=function(t){return u(function(r,n){var e=r.charAt(n);if(n<r.length&&t(e)){return a(n+1,e)}else{return i(n,"a character matching "+t)}})};var b=n.takeWhile=function(t){return u(function(r,n){var e=n;while(e<r.length&&t(r.charAt(e)))e+=1;return a(e,r.slice(n,e))})};var P=n.lazy=function(r,n){if(arguments.length<2){n=r;r=t}var e=u(function(t,r){e._=n()._;return e._(t,r)});if(r)e=e.desc(r);return e};var j=n.index=u(function(t,r){return a(r,r)});r.concat=r.or;r.empty=g("empty");r.of=u.of=n.of=d;r.ap=function(t){return o(this,t).map(function(t){return t[0](t[1])})};r.chain=function(t){var r=this;return u(function(n,e){var u=r._(n,e);if(!u.status)return u;var a=t(u.value);return s(a._(n,u.index),u)})}});return n}();