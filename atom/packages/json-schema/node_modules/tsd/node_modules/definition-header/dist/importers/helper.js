'use strict';
var schema = require('../schema');
var lax = require('../parser/lax');
var joiAssert = require('joi-assert');
function collectPersons(json) {
    if (typeof json === 'string') {
        var result = lax.person.parse(json);
        if (result.status) {
            return [result.value];
        }
        return [];
    }
    if (Array.isArray(json)) {
        return json.reduce(function (memo, x) {
            exports.collectPersons(x).forEach(function (person) {
                memo.push(person);
            });
            return memo;
        }, []);
    }
    if (typeof json === 'object') {
        return [
            joiAssert(json, schema.person)
        ];
    }
    return [];
}
exports.collectPersons = collectPersons;
