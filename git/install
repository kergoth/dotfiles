link . ~/.config/git

touch config.local
case "$OSTYPE" in
    darwin*)
        _OSTYPE=darwin
        ;;
    *)
        _OSTYPE="$OSTYPE"
        ;;
esac
git config -f config.local --replace-all include.path "config.os.$_OSTYPE" "config\.os\."
if [ -e /opt/homebrew/etc/openssl/cert.pem ]; then
    git config -f config.local --replace-all http.sslCAInfo /opt/homebrew/etc/openssl/cert.pem
elif [ -e /usr/local/etc/openssl/cert.pem ]; then
    git config -f config.local --replace-all http.sslCAInfo /usr/local/etc/openssl/cert.pem
fi

newest_version () {
    for ver; do
        printf "%s\n" "$ver"
    done | sort -t. -n | tail -n 1
}

git_version="$(git --version | cut -d" " -f3)"
if [ "$(newest_version 1.8.4 "$git_version")" = 1.8.4 ]; then
    sed -i -e 's/purr = ".*/purr = pull --rebase/' ~/.config/git/config
fi

# vim: set ft=sh sts=4 sw=4 et :
