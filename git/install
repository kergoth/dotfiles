link . ~/.config/git

touch config.local
case "$OSTYPE" in
    darwin*)
        _OSTYPE=darwin
        ;;
    *)
        _OSTYPE="$OSTYPE"
        ;;
esac
git config -f config.local --replace-all include.path "config.os.$_OSTYPE" "config\.os\."

newest_version () {
    for ver; do
        printf "$ver\n"
    done | sort -t. -n | tail -n 1
}

git_version="$(git --version | cut -d" " -f3)"
if [ "$(newest_version 1.8.4 $git_version)" = 1.8.4 ]; then
    sed -i -e 's/purr = ".*/purr = pull --rebase/' ~/.config/git/config
fi

# vim: set ft=sh sts=4 sw=4 et :
