# Phase 2 of ebook processing:
# - Fix metadata with ebook-meta
# - Rename file based on that metadata with ebook-metadata-rename
ebook2 () {
    if [[ $# -lt 1 ]]; then
        echo "Usage: ebook2 BOOKFILENAME [ebook-meta arguments]"
        return 2
    fi
    fn="$1"
    shift

    ebook-meta "$@" "$fn" || {
        echo >&2 "Error setting metadata for $fn, skipping rename"
        return 1
    }
    ebook-metadata-rename "$fn"
}
