#compdef tm

_tm() {
  local -a sessions
  LOGNAME="${LOGNAME:-$(logname)}"
  DVTM_TMPDIR="${TMPDIR:-/tmp}/dvtm-$LOGNAME"
  sessions=($(ls -1 $DVTM_TMPDIR/*-session $DVTM_TMPDIR/*/*-session 2>/dev/null|sed "s,^$DVTM_TMPDIR/,,; s,-session$,,"))
  _arguments '*:sessions:($sessions)'

  return 0
}

_tm

# Local Variables:
# mode: Shell-Script
# sh-indentation: 2
# indent-tabs-mode: nil
# sh-basic-offset: 2
# End:
# vim: ft=zsh sw=2 ts=2 et
