if (( $+commands[rg] )); then
    if [[ -t 1 ]]; then
        if (( $+commands[bat] )); then
            command batgrep -S "$@"
        else
            command rg -S -p "$@" | pager
        fi
    else
        command rg -S "$@"
    fi
else
    ag "$@"
fi
